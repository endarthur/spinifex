<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spinifex</title>

  <!-- OpenLayers -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@latest/ol.css">
  <script src="https://cdn.jsdelivr.net/npm/ol@latest/dist/ol.js"></script>

  <!-- xterm.js -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>

  <!-- proj4 for projections -->
  <script src="https://cdn.jsdelivr.net/npm/proj4@2.9.0/dist/proj4.js"></script>

  <!-- turf for spatial ops -->
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@7/turf.min.js"></script>

  <!-- chroma.js for color scales -->
  <script src="https://cdn.jsdelivr.net/npm/chroma-js@2.4.2/chroma.min.js"></script>

  <!-- WinBox for windowed panels -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/winbox@0.2.82/dist/css/winbox.min.css">
  <script src="https://cdn.jsdelivr.net/npm/winbox@0.2.82/dist/js/winbox.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="styles/spinifex.css">
</head>
<body>
  <header>
    <div class="header-left">
      <div class="logo">
        SPINIFEX
        <span class="logo-sub">ultrabasic web gis</span>
      </div>
      <nav class="menu-bar">
        <div class="menu-item">
          <span class="menu-trigger">Project</span>
          <div class="menu-dropdown">
            <div class="menu-option" data-action="ws-new">New Project</div>
            <div class="menu-option" data-action="ws-open">Open Project...</div>
            <div class="menu-option" data-action="ws-recent">Recent Projects...</div>
            <div class="menu-separator"></div>
            <div class="menu-option" data-action="ws-save">Save</div>
            <div class="menu-option" data-action="ws-versions">Version History...</div>
            <div class="menu-separator"></div>
            <div class="menu-option" data-action="ws-export">Export...</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">Edit</span>
          <div class="menu-dropdown">
            <div class="menu-option disabled" data-action="edit-undo">Undo</div>
            <div class="menu-option disabled" data-action="edit-redo">Redo</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">Layer</span>
          <div class="menu-dropdown">
            <div class="menu-option" data-action="layer-add">Add Layer...</div>
            <div class="menu-option" data-action="layer-sample">Load Sample Data</div>
            <div class="menu-separator"></div>
            <div class="menu-submenu">
              <span class="menu-option submenu-trigger">Basemap</span>
              <div class="submenu-dropdown">
                <div class="menu-group-label">CartoDB</div>
                <div class="menu-option" data-action="basemap-dark">Dark Matter</div>
                <div class="menu-option" data-action="basemap-light">Positron</div>
                <div class="menu-option" data-action="basemap-voyager">Voyager</div>
                <div class="menu-separator"></div>
                <div class="menu-group-label">OpenStreetMap</div>
                <div class="menu-option" data-action="basemap-osm">OpenStreetMap</div>
                <div class="menu-option" data-action="basemap-topo">OpenTopoMap</div>
                <div class="menu-separator"></div>
                <div class="menu-group-label">Stamen</div>
                <div class="menu-option" data-action="basemap-stamen-toner">Toner</div>
                <div class="menu-option" data-action="basemap-stamen-toner-lite">Toner Lite</div>
                <div class="menu-option" data-action="basemap-stamen-terrain">Terrain</div>
                <div class="menu-option" data-action="basemap-stamen-watercolor">Watercolor</div>
                <div class="menu-separator"></div>
                <div class="menu-group-label">ESRI</div>
                <div class="menu-option" data-action="basemap-satellite">Satellite</div>
                <div class="menu-option" data-action="basemap-esri-topo">World Topo</div>
                <div class="menu-option" data-action="basemap-esri-street">World Street</div>
                <div class="menu-separator"></div>
                <div class="menu-option" data-action="basemap-custom">Custom URL...</div>
                <div class="menu-separator"></div>
                <div class="menu-option" data-action="basemap-clear">Clear All Basemaps</div>
              </div>
            </div>
            <div class="menu-separator"></div>
            <div class="menu-option" data-action="layer-clear">Clear All Layers</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">Vector</span>
          <div class="menu-dropdown" data-menu="vector">
            <div class="menu-option disabled">Loading...</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">Raster</span>
          <div class="menu-dropdown" data-menu="raster">
            <div class="menu-option disabled">Loading...</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">Tools</span>
          <div class="menu-dropdown" data-menu="tools">
            <div class="menu-option disabled">Loading...</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">View</span>
          <div class="menu-dropdown">
            <div class="menu-option" data-action="toggle-layers">Layers Panel</div>
            <div class="menu-option" data-action="toggle-terminal">Terminal</div>
            <div class="menu-option" data-action="toggle-legend">Legend</div>
            <div class="menu-separator"></div>
            <div class="menu-option" data-action="view-map">Map (2D)</div>
            <div class="menu-option" data-action="view-3d">3D</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">Settings</span>
          <div class="menu-dropdown">
            <div class="menu-option" data-action="open-settings">Preferences...</div>
          </div>
        </div>
        <div class="menu-item">
          <span class="menu-trigger">Help</span>
          <div class="menu-dropdown">
            <div class="menu-option" data-action="show-help">API Reference</div>
            <div class="menu-separator"></div>
            <div class="menu-option" data-action="show-about">About Spinifex</div>
          </div>
        </div>
      </nav>
    </div>
    <div class="header-right">
      <span class="workspace-name" id="workspace-name"></span>
    </div>
  </header>

  <!-- Main view tabs -->
  <div id="view-tabs">
    <div class="view-tab active" data-view="map2d">Map</div>
    <div class="view-tab" data-view="map3d">3D</div>
  </div>

  <!-- View content area -->
  <main id="view-content">
    <div id="view-map2d" class="view-panel active">
      <div id="map"></div>
    </div>
    <div id="view-map3d" class="view-panel">
      <div class="view-placeholder">3D view coming soon</div>
    </div>
  </main>

  <div class="status-bar">
    <div class="status-item">
      <span class="status-label">CRS:</span>
      <span class="status-value" id="status-crs">EPSG:4326</span>
    </div>
    <div class="status-item">
      <span class="status-label">Cursor:</span>
      <span class="status-value" id="status-coords">--.----, --.----</span>
    </div>
    <div class="status-item">
      <span class="status-label">Layers:</span>
      <span class="status-value" id="status-layers">0</span>
    </div>
  </div>

  <!-- Popup overlay -->
  <div id="popup" class="ol-popup">
    <span class="ol-popup-closer" onclick="closePopup()">&times;</span>
    <div id="popup-content"></div>
  </div>

  <!-- Main application -->
  <script type="module" src="src/main.js"></script>
</body>
</html>
